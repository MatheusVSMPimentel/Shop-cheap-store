import{a as k,b as ae}from"./chunk-V64KU7TV.js";import{a as J,c as le}from"./chunk-AIU7CKLP.js";import{$ as a,$a as te,Ab as v,Ba as p,Ca as D,D as I,E as M,Fb as z,G as N,Gb as ne,Ha as C,Hb as se,I as S,J as R,Jb as me,Sa as V,Ta as H,Ua as A,V as _,Vb as W,X as y,Ya as ee,aa as u,bb as ie,ea as T,fa as f,ha as m,hb as re,ib as oe,jb as w,la as n,lb as K,m as Y,ma as s,na as c,pb as P,ra as O,rb as g,sa as h,sb as U,t as $,tb as B,vb as E,wb as G,xa as L,ya as j,yb as Q,za as q}from"./chunk-VXBRRWNJ.js";var x=(()=>{let e=class e extends le{constructor(i){super(),this.http=i}userRegister(i){return this.http.post(this.urlServiceV1+"nova-conta",i,this.getJSONHeader()).pipe(Y(this.extractData),$(this.serviceError))}login(i){return this.http.post(this.urlServiceV1+"entrar",i,this.getJSONHeader()).pipe(Y(this.extractData),$(this.serviceError))}};e.\u0275fac=function(r){return new(r||e)(N(te))},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})();var X=t=>({"is-invalid":t});function Se(t,e){if(t&1&&(n(0,"li"),p(1),s()),t&2){let l=e.$implicit;a(),D(l)}}function we(t,e){if(t&1&&(n(0,"div",12)(1,"h3",13),p(2,"Oops! Something isn't right:"),s(),n(3,"ul"),f(4,Se,2,1,"li",14),s()()),t&2){let l=h();a(4),m("ngForOf",l.errors)}}function Fe(t,e){if(t&1&&(n(0,"span",15),c(1,"p",16),s()),t&2){let l=h();a(),m("innerHTML",l.displayMessage.email,y)}}function xe(t,e){if(t&1&&(n(0,"span",15),c(1,"p",16),s()),t&2){let l=h();a(),m("innerHTML",l.displayMessage.password,y)}}function be(t,e){if(t&1&&(n(0,"span",15),c(1,"p",16),s()),t&2){let l=h();a(),m("innerHTML",l.displayMessage.confirmPassword,y)}}var ce=(()=>{let e=class e extends J{constructor(i,r,o,d){super(),this.formBuilder=i,this.accountService=r,this.router=o,this.toastr=d,this.errors=[],this.validationMessages={email:{required:"The field e-mail is required.",email:"E-mail format is invalid."},password:{required:"The field password is required.",rangeLength:"The field password needs to have a length between 6 to 15 chars"},confirmPassword:{equalTo:"The passwords don't match"}},super.settingUpMessagesValidation(this.validationMessages)}ngAfterViewInit(){super.settingUpFormValidation(this.formInputElements,[this.registerForm])}ngOnInit(){let i=new E({value:"",disabled:!1},[g.required,k.rangeLength([6,15])]),r=new E("");this.registerForm=this.formBuilder.group({email:["",[g.required,g.email]],password:i,confirmPassword:r})}registerUser(){this.registerForm.dirty&&this.registerForm.valid&&(this.user=Object.assign({},this.user,this.registerForm.value),this.accountService.userRegister(this.user).subscribe({next:i=>this.successOnRegister(i),error:i=>this.errorOnRegister(i)}),this.changesNotSaved=!1)}successOnRegister(i){this.registerForm.reset(),this.errors=[],this.accountService.localStorage.setLocalUserData(i);let r=this.toastr.success("Your registration has been successful","Welcome!! :D");r&&r.onHidden.subscribe(()=>this.router.navigate(["/home"]))}errorOnRegister(i){this.errors=i.error.errors,this.toastr.error("An error occurred ","Oops :'(")}};e.\u0275fac=function(r){return new(r||e)(u(z),u(x),u(w),u(W))},e.\u0275cmp=S({type:e,selectors:[["app-register"]],viewQuery:function(r,o){if(r&1&&L(v,5,_),r&2){let d;j(d=q())&&(o.formInputElements=d)}},features:[T],decls:31,vars:15,consts:[[1,"container","main-container"],["novalidate","",3,"ngSubmit","formGroup"],["class","alert alert-danger",4,"ngIf"],[1,"form-group"],[1,"col-md-2","control-label"],[1,"col-md-10"],["id","email","type","text","placeholder","E-mail (required)","formControlName","email",1,"form-control",3,"ngClass"],["class","text-danger",4,"ngIf"],["id","password","type","password","placeholder","Password (required)","formControlName","password",1,"form-control",3,"ngClass"],["id","confirmPassword","type","password","placeholder","Confirm your password (required)","formControlName","confirmPassword",1,"form-control",3,"ngClass"],[1,"col-md-4","col-md-offset-2"],["id","register","type","submit",1,"btn","btn-success",3,"disabled"],[1,"alert","alert-danger"],["id","msgRetorno"],[4,"ngFor","ngForOf"],[1,"text-danger"],[3,"innerHTML"]],template:function(r,o){r&1&&(n(0,"div",0)(1,"h1"),p(2,"Sign In"),s(),n(3,"form",1),O("ngSubmit",function(){return o.registerUser()}),n(4,"h4"),p(5,"Create your Account"),s(),c(6,"hr"),f(7,we,5,1,"div",2),n(8,"div",3)(9,"label",4),p(10,"E-mail"),s(),n(11,"div",5),c(12,"input",6),f(13,Fe,2,1,"span",7),s()(),n(14,"div",3)(15,"label",4),p(16,"Password"),s(),n(17,"div",5),c(18,"input",8),f(19,xe,2,1,"span",7),s()(),n(20,"div",3)(21,"label",4),p(22,"Confirm your password"),s(),n(23,"div",5),c(24,"input",9),f(25,be,2,1,"span",7),s()(),n(26,"div",3)(27,"div",10)(28,"span")(29,"button",11),p(30,"Register"),s()()()()()()),r&2&&(a(3),m("formGroup",o.registerForm),a(4),m("ngIf",o.errors.length>0),a(5),m("ngClass",C(9,X,o.displayMessage.email)),a(),m("ngIf",o.displayMessage.email),a(5),m("ngClass",C(11,X,o.displayMessage.password)),a(),m("ngIf",o.displayMessage.password),a(5),m("ngClass",C(13,X,o.displayMessage.confirmPassword)),a(),m("ngIf",o.displayMessage.confirmPassword),a(4),m("disabled",!o.registerForm.valid))},dependencies:[V,H,A,G,P,U,B,Q,v]});let t=e;return t})();var de=t=>({"is-invalid":t});function Ee(t,e){if(t&1&&(n(0,"li"),p(1),s()),t&2){let l=e.$implicit;a(),D(l)}}function Ie(t,e){if(t&1&&(n(0,"div",11)(1,"h3",12),p(2,"Oops! Something isn't right:"),s(),n(3,"ul"),f(4,Ee,2,1,"li",13),s()()),t&2){let l=h();a(4),m("ngForOf",l.errors)}}function Me(t,e){if(t&1&&(n(0,"span",14),c(1,"p",15),s()),t&2){let l=h();a(),m("innerHTML",l.displayMessage.email,y)}}function Ne(t,e){if(t&1&&(n(0,"span",14),c(1,"p",15),s()),t&2){let l=h();a(),m("innerHTML",l.displayMessage.password,y)}}var ue=(()=>{let e=class e extends J{constructor(i,r,o,d,he){super(),this.formBuilder=i,this.accountService=r,this.router=o,this.acRoute=d,this.toastr=he,this.errors=[],this.validationMessages={email:{required:"The field e-mail is required.",email:"E-mail format is invalid."},password:{required:"The field password is required.",rangeLength:"The field password needs to have a length between 6 to 15 chars"}},this.returnUrl=this.acRoute.snapshot.queryParams.returnUrl,super.settingUpMessagesValidation(this.validationMessages)}ngAfterViewInit(){super.settingUpFormValidation(this.formInputElements,[this.loginForm])}ngOnInit(){let i=new E("",[g.required,k.rangeLength([6,15])]);this.loginForm=this.formBuilder.group({email:["",[g.required,g.email]],password:i})}login(){this.loginForm.dirty&&this.loginForm.valid&&(this.user=Object.assign({},this.user,this.loginForm.value),this.accountService.login(this.user).subscribe({next:i=>this.successOnRegister(i),error:i=>this.errorOnRegister(i)}))}successOnRegister(i){this.loginForm.reset(),this.errors=[];let r=this.returnUrl??"/home";this.accountService.localStorage.setLocalUserData(i);let o=this.toastr.success("Your registration has been successful","Welcome!! :D");o&&o.onHidden.subscribe(()=>this.router.navigate([r]))}errorOnRegister(i){this.errors=i.error.errors,this.toastr.error("An error occurred ","Oops :'(")}};e.\u0275fac=function(r){return new(r||e)(u(z),u(x),u(w),u(re),u(W))},e.\u0275cmp=S({type:e,selectors:[["app-login"]],viewQuery:function(r,o){if(r&1&&L(v,5,_),r&2){let d;j(d=q())&&(o.formInputElements=d)}},features:[T],decls:25,vars:11,consts:[[1,"container","main-container"],["novalidate","",3,"ngSubmit","formGroup"],["class","alert alert-danger",4,"ngIf"],[1,"form-group"],[1,"col-md-2","control-label"],[1,"col-md-10"],["id","email","type","text","placeholder","E-mail (required)","formControlName","email",1,"form-control",3,"ngClass"],["class","text-danger",4,"ngIf"],["id","password","type","password","placeholder","Password (required)","formControlName","password",1,"form-control",3,"ngClass"],[1,"col-md-4","col-md-offset-2"],["id","login","type","submit",1,"btn","btn-success",3,"disabled"],[1,"alert","alert-danger"],["id","msgRetorno"],[4,"ngFor","ngForOf"],[1,"text-danger"],[3,"innerHTML"]],template:function(r,o){r&1&&(n(0,"div",0)(1,"h1"),p(2,"Login"),s(),n(3,"form",1),O("ngSubmit",function(){return o.login()}),n(4,"h4"),p(5,"Create your Account"),s(),c(6,"hr"),f(7,Ie,5,1,"div",2),n(8,"div",3)(9,"label",4),p(10,"E-mail"),s(),n(11,"div",5),c(12,"input",6),f(13,Me,2,1,"span",7),s()(),n(14,"div",3)(15,"label",4),p(16,"Password"),s(),n(17,"div",5),c(18,"input",8),f(19,Ne,2,1,"span",7),s()(),n(20,"div",3)(21,"div",9)(22,"span")(23,"button",10),p(24,"Login"),s()()()()()()),r&2&&(a(3),m("formGroup",o.loginForm),a(4),m("ngIf",o.errors.length>0),a(5),m("ngClass",C(7,de,o.displayMessage.email)),a(),m("ngIf",o.displayMessage.email),a(5),m("ngClass",C(9,de,o.displayMessage.password)),a(),m("ngIf",o.displayMessage.password),a(4),m("disabled",!o.loginForm.valid))},dependencies:[V,H,A,G,P,U,B,Q,v]});let t=e;return t})();var fe=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=S({type:e,selectors:[["account-app-root"]],decls:1,vars:0,template:function(r,o){r&1&&c(0,"router-outlet")},dependencies:[oe],encapsulation:2});let t=e;return t})();var b=(()=>{let e=class e{constructor(i){this.router=i,this.localStorage=new me}canDeactivate(i){return i.changesNotSaved?window.confirm("Changes aren't saved, Do you really want to leave?"):!0}canActivate(){return this.localStorage.getLocalUserToken()&&this.router.navigate(["/home"]),!0}};e.\u0275fac=function(r){return new(r||e)(N(w))},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})();var Re=[{path:"",component:fe,children:[{path:"register",component:ce,canDeactivate:[b],canActivate:[b]},{path:"login",component:ue,canActivate:[b]}]}],ge=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=R({type:e}),e.\u0275inj=M({imports:[K.forChild(Re),K]});let t=e;return t})();var yt=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=R({type:e}),e.\u0275inj=M({providers:[x,ae,g,b],imports:[ee,se,ne,ie,ge]});let t=e;return t})();export{yt as AccountModule};
